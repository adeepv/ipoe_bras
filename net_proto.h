//-----------------------------------------------------------------------------
#ifndef NET_PROTO_H
#define NET_PROTO_H
//-----------------------------------------------------------------------------
//-----------------------------------------------------------------------------
/*
 0                   1                   2                   3
 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
 +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
 |    code (1)   |    type (1)   |  Контрольная сумма (Checksum) |
 +---------------+---------------+-------------------------------+
 |              len (2)          |          pad (2)              |
 +-------------------------------+-------------------------------+
 */
struct nms_message_header {
 u8  code;
#define NMS_MESS_CODE_REQUEST     1
#define NMS_MESS_CODE_REPLY       2
#define NMS_MESS_CODE_NOTYFY      3
 u8  type;
#define NMS_MESS_TYPE_SESSION     1
#define NMS_MESS_TYPE_NODE        2
 u16 csum;
 u16 len;
 u16 pad2;
} __attribute__ ((packed));
//-----------------------------------------------------------------------------
/*
 0                   1                   2                   3
 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
 +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
 |     outer vlan tag (2)        |     inner vlan tag (2)        |
 +-------------------------------+-------------------------------+
 |                      session ip addres (4)                    |
 +---------------------------------------------------------------+
 |                                                               |
 |                      session mac addres (16)                  |
 |                                                               |
 +---------------------------------------------------------------+
 |                         event flags (4)                       |
 +---------------------------------------------------------------+
 */
struct nms_message_session_notify {
 u16  q;
 u16  v;
 u32  ip;
 u8   mac[8];
 u32  flags;  /* Bitmask */
#define NMS_MESS_SESSION_FLAGS_ONLINE            1
#define NMS_MESS_SESSION_FLAGS_LOCK              2
#define NMS_MESS_SESSION_FLAGS_MULTIUSER         3
} __attribute__ ((packed));
//-----------------------------------------------------------------------------
#endif
//-----------------------------------------------------------------------------
